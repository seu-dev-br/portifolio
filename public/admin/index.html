<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Painel Administrativo - Ítalo Antonio</title>
    <!-- CSS Principal -->
    <link rel="stylesheet" href="style.css">
    <!-- Estilos para Posts -->
    <link rel="stylesheet" href="post-styles.css">
    <!-- Easy MDE Editor -->
    <link rel="stylesheet" href="https://unpkg.com/easymde/dist/easymde.min.css">
    <!-- Font Awesome para Ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- Marked para renderização de Markdown -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <!-- Tela de Login -->
    <div id="login-container" class="container">
        <div class="login-card">
            <h1>Painel Administrativo - Ítalo Antonio</h1>
            <form id="login-form">
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" required>
                </div>
                <div class="form-group">
                    <label for="password">Senha:</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit" class="btn btn-primary">Entrar</button>
            </form>
            <div id="login-error" class="error-message" style="display: none;"></div>
        </div>
    </div>

    <!-- Dashboard de Gerenciamento -->
    <div id="dashboard-container" class="container" style="display: none;">
        <header class="dashboard-header">
            <h1>Dashboard - Ítalo Antonio</h1>
            <button id="logout-btn" class="btn btn-secondary">Sair</button>
        </header>

        <!-- Navegação -->
        <nav class="dashboard-nav">
            <button class="nav-item" data-view="overview">Visão Geral</button>
            <button class="nav-item" data-view="projects">Projetos</button>
            <button class="nav-item" data-view="posts">Blog</button>
            <button class="nav-item" data-view="messages">Mensagens</button>
            <button class="nav-item" data-view="home">Página Inicial</button>
            <button class="nav-item" data-view="about">Página Sobre</button>
            <button class="nav-item" data-view="settings">Configurações</button>
        </nav>

        <!-- Conteúdo das Abas -->
        <div class="tab-content" id="overview-tab">
            <!-- Visão Geral -->
            <div class="stats-grid">
                <div class="stat-card">
                    <h3 id="projects-count">0</h3>
                    <p>Projetos</p>
                </div>
                <div class="stat-card">
                    <h3 id="posts-count">0</h3>
                    <p>Posts</p>
                </div>
                <div class="stat-card">
                    <h3 id="messages-count">0</h3>
                    <p>Mensagens</p>
                </div>
                <div class="stat-card">
                    <h3 id="visits-count">0</h3>
                    <p>Visitas</p>
                </div>
            </div>

            <div class="quick-actions">
                <button class="btn btn-primary" id="add-project-btn">
                    <i class="fas fa-plus"></i> Novo Projeto
                </button>
                <button class="btn btn-primary" id="add-post-btn">
                    <i class="fas fa-plus"></i> Novo Post
                </button>
            </div>
        </div>

        <div class="tab-content" id="projects-tab">
            <!-- Projetos -->
            <div class="section-header">
                <h2>Gerenciar Projetos</h2>
                <button class="btn btn-primary" id="add-project-btn">
                    <i class="fas fa-plus"></i> Novo Projeto
                </button>
            </div>
            <div id="projects-list" class="content-list">
                <!-- Projetos serão carregados aqui -->
            </div>
        </div>

        <div class="tab-content" id="posts-tab">
            <!-- Blog Posts -->
            <div class="section-header">
                <h2>Gerenciar Posts</h2>
                <button class="btn btn-primary" id="add-post-btn">
                    <i class="fas fa-plus"></i> Novo Post
                </button>
            </div>
            <div id="posts-list" class="content-list">
                <!-- Posts serão carregados aqui -->
            </div>
        </div>

        <div class="tab-content" id="messages-tab">
            <!-- Mensagens de Contato -->
            <div class="section-header">
                <h2>Mensagens de Contato</h2>
                <button class="btn btn-secondary" id="refresh-messages-btn">
                    <i class="fas fa-sync"></i> Atualizar
                </button>
            </div>
            <div id="messages-list" class="content-list">
                <!-- Mensagens serão carregadas aqui -->
            </div>
        </div>

        <div class="tab-content" id="settings-tab">
            <!-- Configurações -->
            <div class="section-header">
                <h2>Configurações do Sistema</h2>
            </div>
            <div class="settings-content">
                <p>Configurações em desenvolvimento...</p>
            </div>
        </div>

        <div class="tab-content" id="home-tab">
            <!-- Página Inicial -->
            <div class="section-header">
                <h2>Gerenciar Página Inicial</h2>
                <button class="btn btn-primary" id="save-home-btn">
                    <i class="fas fa-save"></i> Salvar Alterações
                </button>
            </div>

            <!-- Hero Section -->
            <div class="settings-section">
                <h3>Seção Hero</h3>
                <div class="form-group">
                    <label for="hero-title">Título Principal:</label>
                    <input type="text" id="hero-title" placeholder="Olá, eu sou Ítalo Antonio">
                </div>
                <div class="form-group">
                    <label for="hero-subtitle">Subtítulo:</label>
                    <input type="text" id="hero-subtitle" placeholder="Desenvolvedor Full Stack">
                </div>
                <div class="form-group">
                    <label for="hero-description">Descrição:</label>
                    <textarea id="hero-description" rows="4" placeholder="Criando experiências digitais excepcionais..."></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="hero-cta-primary">CTA Primário:</label>
                        <input type="text" id="hero-cta-primary" placeholder="Ver Projetos">
                    </div>
                    <div class="form-group">
                        <label for="hero-cta-secondary">CTA Secundário:</label>
                        <input type="text" id="hero-cta-secondary" placeholder="Sobre Mim">
                    </div>
                </div>
            </div>

            <!-- Slider Section -->
            <div class="settings-section">
                <h3>Slider</h3>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="slider-enabled"> Habilitar Slider
                    </label>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="slider-autoplay"> Autoplay
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="slider-delay">Delay (ms):</label>
                        <input type="number" id="slider-delay" value="5000" min="1000" max="20000" step="1000">
                    </div>
                </div>
                <div id="slider-items-container">
                    <!-- Slider items will be added here -->
                </div>
                <button class="btn btn-outline" id="add-slide-btn">
                    <i class="fas fa-plus"></i> Adicionar Slide
                </button>
            </div>

            <!-- Featured Projects -->
            <div class="settings-section">
                <h3>Projetos em Destaque</h3>
                <div class="form-group">
                    <label for="featured-title">Título da Seção:</label>
                    <input type="text" id="featured-title" placeholder="Projetos em Destaque">
                </div>
                <div class="form-group">
                    <label for="featured-description">Descrição:</label>
                    <textarea id="featured-description" rows="2" placeholder="Alguns dos meus trabalhos mais recentes..."></textarea>
                </div>
                <div class="form-group">
                    <label for="featured-count">Número de Projetos:</label>
                    <input type="number" id="featured-count" value="3" min="1" max="10">
                </div>
            </div>

            <!-- Latest Posts -->
            <div class="settings-section">
                <h3>Últimas Publicações</h3>
                <div class="form-group">
                    <label for="posts-title">Título da Seção:</label>
                    <input type="text" id="posts-title" placeholder="Últimas Publicações">
                </div>
                <div class="form-group">
                    <label for="posts-description">Descrição:</label>
                    <textarea id="posts-description" rows="2" placeholder="Confira minhas últimas publicações..."></textarea>
                </div>
                <div class="form-group">
                    <label for="posts-count">Número de Posts:</label>
                    <input type="number" id="posts-count" value="3" min="1" max="10">
                </div>
            </div>
        </div>

        <div class="tab-content" id="about-tab">
            <!-- Página Sobre -->
            <div class="section-header">
                <h2>Gerenciar Página Sobre</h2>
                <button class="btn btn-primary" id="save-about-btn">
                    <i class="fas fa-save"></i> Salvar Alterações
                </button>
            </div>

            <!-- Bio -->
            <div class="settings-section">
                <h3>Biografia</h3>
                <div class="form-group">
                    <label for="about-bio">Texto da Biografia:</label>
                    <textarea id="about-bio" rows="6" placeholder="Conte sua história profissional..."></textarea>
                </div>
                <div class="form-group">
                    <label for="about-profile-image">Foto do Perfil:</label>
                    <input type="text" id="about-profile-image" placeholder="URL da imagem do perfil">
                    <div id="about-profile-preview" class="image-preview"></div>
                </div>
            </div>

            <!-- Skills -->
            <div class="settings-section">
                <h3>Habilidades</h3>
                <div class="form-group">
                    <label for="skills-frontend">Frontend (separadas por vírgula):</label>
                    <input type="text" id="skills-frontend" placeholder="HTML5, CSS3, JavaScript, React, TypeScript">
                </div>
                <div class="form-group">
                    <label for="skills-backend">Backend (separadas por vírgula):</label>
                    <input type="text" id="skills-backend" placeholder="Node.js, Python, PHP, PostgreSQL">
                </div>
                <div class="form-group">
                    <label for="skills-database">Banco de Dados (separadas por vírgula):</label>
                    <input type="text" id="skills-database" placeholder="MySQL, PostgreSQL, MongoDB">
                </div>
                <div class="form-group">
                    <label for="skills-tools">Ferramentas (separadas por vírgula):</label>
                    <input type="text" id="skills-tools" placeholder="Git, Docker, AWS, Figma">
                </div>
            </div>

            <!-- Social Links -->
            <div class="settings-section">
                <h3>Links Sociais</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="social-github">GitHub:</label>
                        <input type="url" id="social-github" placeholder="https://github.com/seu-usuario">
                    </div>
                    <div class="form-group">
                        <label for="social-linkedin">LinkedIn:</label>
                        <input type="url" id="social-linkedin" placeholder="https://linkedin.com/in/seu-perfil">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="social-twitter">Twitter:</label>
                        <input type="url" id="social-twitter" placeholder="https://twitter.com/seu-usuario">
                    </div>
                    <div class="form-group">
                        <label for="social-email">E-mail:</label>
                        <input type="email" id="social-email" placeholder="seu.email@exemplo.com">
                    </div>
                </div>
            </div>

            <!-- Experience -->
            <div class="settings-section">
                <h3>Experiência Profissional</h3>
                <div id="experience-container">
                    <!-- Experience items will be added here -->
                </div>
                <button class="btn btn-outline" id="add-experience-btn">
                    <i class="fas fa-plus"></i> Adicionar Experiência
                </button>
            </div>

            <!-- Education -->
            <div class="settings-section">
                <h3>Formação</h3>
                <div id="education-container">
                    <!-- Education items will be added here -->
                </div>
                <button class="btn btn-outline" id="add-education-btn">
                    <i class="fas fa-plus"></i> Adicionar Formação
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loading-spinner" class="spinner" style="display: none;">
        <div class="spinner-circle"></div>
    </div>

    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Supabase Initialization -->
    <script>
        // Initialize Supabase with error handling
        function initializeSupabase() {
            try {
                // Check if Supabase SDK is loaded
                if (typeof supabase === 'undefined') {
                    throw new Error('Supabase SDK not loaded');
                }

                const supabaseUrl = 'https://nattvkjaecceirxthizc.supabase.co';
                const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5hdHR2a2phZWNjZWlyeHRoaXpjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY5MjM2NTMsImV4cCI6MjA3MjQ5OTY1M30.K6Nfu5oGeoo6bZyToBNWkBdA1CncXEjWIrSydlMU2WQ';

                if (!supabaseUrl || !supabaseAnonKey) {
                    throw new Error('Supabase credentials not found');
                }

                window.supabase = supabase.createClient(supabaseUrl, supabaseAnonKey);
                console.log('✅ Supabase initialized successfully at:', new Date().toISOString());
                console.log('🔗 Supabase URL:', supabaseUrl);

                // Dispatch event to notify other scripts
                window.dispatchEvent(new CustomEvent('supabaseReady'));

                // Test connection
                window.supabase.auth.getSession().then(({ data, error }) => {
                    if (error) {
                        console.error('❌ Supabase connection test failed:', error);
                    } else {
                        console.log('✅ Supabase connection test successful');
                    }
                });

            } catch (error) {
                console.error('❌ Failed to initialize Supabase:', error);
                // Don't show alert, just log the error
            }
        }

        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeSupabase);
        } else {
            initializeSupabase();
        }
    </script>
    
    <!-- EasyMDE -->
    <script src="https://unpkg.com/easymde/dist/easymde.min.js"></script>
    
    <!-- Admin Script -->
    <script src="../admin.js"></script>
</body>
</html>
