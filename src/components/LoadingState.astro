---
// LoadingState.astro - Componente para estados de carregamento
export interface Props {
  size?: 'sm' | 'md' | 'lg' | 'xl';
  variant?: 'spinner' | 'pulse' | 'dots' | 'skeleton';
  text?: string;
  fullScreen?: boolean;
  overlay?: boolean;
}

const {
  size = 'md',
  variant = 'spinner',
  text,
  fullScreen = false,
  overlay = false
} = Astro.props;

// Size configurations
const sizeClasses = {
  sm: 'w-4 h-4',
  md: 'w-8 h-8',
  lg: 'w-12 h-12',
  xl: 'w-16 h-16'
};

const textSizeClasses = {
  sm: 'text-sm',
  md: 'text-base',
  lg: 'text-lg',
  xl: 'text-xl'
};
---

<div
  class={`loading-state ${fullScreen ? 'fixed inset-0 z-50 flex items-center justify-center' : 'inline-flex items-center justify-center'} ${overlay ? 'bg-black/50 backdrop-blur-sm' : ''}`}
  role="status"
  aria-live="polite"
>
  <!-- Spinner Variant -->
  {variant === 'spinner' && (
    <div class={`relative ${sizeClasses[size]}`}>
      <div class="absolute inset-0 rounded-full border-2 border-gray-600"></div>
      <div class="absolute inset-0 rounded-full border-2 border-transparent border-t-primary-400 animate-spin"></div>
    </div>
  )}

  <!-- Pulse Variant -->
  {variant === 'pulse' && (
    <div class={`relative ${sizeClasses[size]}`}>
      <div class="absolute inset-0 rounded-full bg-primary-400 animate-pulse"></div>
      <div class="absolute inset-1 rounded-full bg-gray-900"></div>
    </div>
  )}

  <!-- Dots Variant -->
  {variant === 'dots' && (
    <div class="flex space-x-1">
      <div class={`w-2 h-2 bg-primary-400 rounded-full animate-bounce`}></div>
      <div class={`w-2 h-2 bg-primary-400 rounded-full animate-bounce`} style="animation-delay: 0.1s"></div>
      <div class={`w-2 h-2 bg-primary-400 rounded-full animate-bounce`} style="animation-delay: 0.2s"></div>
    </div>
  )}

  <!-- Skeleton Variant -->
  {variant === 'skeleton' && (
    <div class="space-y-3">
      <div class="h-4 bg-gray-700 rounded animate-pulse"></div>
      <div class="h-4 bg-gray-700 rounded animate-pulse w-3/4"></div>
      <div class="h-4 bg-gray-700 rounded animate-pulse w-1/2"></div>
    </div>
  )}

  {text && (
    <span class={`ml-3 ${textSizeClasses[size]} text-gray-300`}>
      {text}
    </span>
  )}

  <span class="sr-only">Carregando...</span>
</div>

<style>
  /* Custom animations for loading states */
  @keyframes shimmer {
    0% {
      background-position: -200px 0;
    }
    100% {
      background-position: calc(200px + 100%) 0;
    }
  }

  .loading-skeleton {
    background: linear-gradient(90deg, #374151 25%, #4b5563 50%, #374151 75%);
    background-size: 200px 100%;
    animation: shimmer 1.5s infinite;
  }

  /* Enhanced spinner animation */
  @keyframes spin-smooth {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  .animate-spin {
    animation: spin-smooth 1s linear infinite;
  }

  /* Bounce animation for dots */
  @keyframes bounce-custom {
    0%, 20%, 50%, 80%, 100% {
      transform: translateY(0);
    }
    40% {
      transform: translateY(-10px);
    }
    60% {
      transform: translateY(-5px);
    }
  }

  .animate-bounce {
    animation: bounce-custom 1.4s infinite ease-in-out both;
  }
</style>
